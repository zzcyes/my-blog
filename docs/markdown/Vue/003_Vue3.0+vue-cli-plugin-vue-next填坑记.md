# 003ï¼šVue3.0+vue-cli-plugin-vue-next å¡«å‘è®°

## ğŸ“TODOs

- [x] tslint Missing semicolon (semicolon)
- [ ] Missing trailing comma (trailing-comma)tslint(trailing-comma)
- [x] Module 'node_modules/vue-router' has no exporter member 'RouteConfig'
- [x] Cannot use namespace 'Vue' as a type.
- [x] Property 'createStore' does not exist on type...
- [ ] "export 'default' (imported as 'Vue') was not found in 'vue'

è·‘é¡¹ç›®çš„æ—¶å€™é‡åˆ°æ¯”è¾ƒå¤šçš„å‘ï¼Œåæ¥æ‰å» github æŸ¥çœ‹[vue-cli-plugin-vue-next](https://github.com/vuejs/vue-cli-plugin-vue-next/issues)çš„ `issues` ï¼Œå…¶å®å¤§å¤šæ•°ç¢°åˆ°çš„å‘å…¶ä»–äººå·²ç»æä¸Šå»äº†ã€‚è¦æ˜¯ä»¥åç¢°åˆ°ç±»ä¼¼é—®é¢˜ï¼Œè¿˜æ˜¯å¾—å…ˆå» issues çœ‹çœ‹ï¼Œèƒ½èŠ‚çœå¾ˆå¤šè¸©å‘çš„æ—¶é—´ã€‚

- [vue next cli guidance #18](https://github.com/vuejs/vue-cli-plugin-vue-next/issues/18)

![vue-next-031.png](./images/vue-next-031.png)

## â“ Problem Record

è¿™é‡Œè®°å½•çš„ä¸»è¦æ˜¯é€šè¿‡ `vue-cli` è„šæ‰‹æ¶æ­å»ºçš„é¡¹ç›®ï¼Œå¹¶é€šè¿‡å‘½ä»¤ `vue add vue-next` å‡çº§ä¸º vue3.0 ç‰ˆæœ¬çš„é—®é¢˜æƒ…å†µã€‚

### tslint Missing semicolon (semicolon)

![vue-next-017.png](./images/vue-next-017.png)

é‡åˆ°è¿™ç§æ²¡è§è¿‡çš„é—®é¢˜å½“ç„¶æ˜¯ google å–½

[How to ignore semicolons with â€œtslint:recomendedâ€](https://stackoverflow.com/questions/56569799/how-to-ignore-semicolons-with-tslintrecomended)

tslint.json

```json
{
    ...
    "rules":{
        ...
        "semicolon":false
    }
}
```

### Missing trailing comma (trailing-comma)tslint(trailing-comma)

### Module 'node_modules/vue-router' has no exporter member 'RouteConfig'

æç¤ºè¯´æ²¡æœ‰å¯¼å‡º RouteConfig,æˆ‘ä¸€è„¸æ‡µ

![vue-next-018.png](./images/vue-next-018.png)

è¿™ä¸æ˜¯æ¸…æ¸…æ¥šæ¥šæ˜æ˜ç™½ç™½çš„ä» vue-router å¯¼å…¥äº†å—ï¼Ÿè¿˜æ˜¯è„šæ‰‹æ¶è‡ªå·±ç”Ÿæˆçš„ã€‚

route.ts

```typescript
import { RouteConfig, createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes: RouteConfig[] = [
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.[hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =>
      import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

export default router;
```

äºæ˜¯å’±åˆå¼€å§‹äº† Google ä¹‹æ—…

å‘µï¼Œå¥½å®¶ä¼™ï¼Œstack overflow æœ‰äººæé—®ï¼Œè¿™æ ‡é¢˜èµ·çš„ä¸å°±æ˜¯æˆ‘è¦é—®çš„ï¼Ÿ

![vue-next-019.png](./images/vue-next-019.png)

å¾ˆé—æ†¾çš„æ˜¯å¹¶æ²¡æœ‰äººå›ç­”ï¼Œåªèƒ½ä¾é è‡ªå·±å‹¤åŠ³çš„åŒæ‰‹å’Œå¶å°”ä¸å®•æœºçš„å¤§è„‘äº†äº†

é¦–å…ˆæ‰“å¼€`vue-route`,æŸ¥çœ‹`RouterConfig`çš„å®šä¹‰

å…¨å±€æœ RouterConfig

![vue-next-020.png](./images/vue-next-020.png)

???å°æœ‹å‹ï¼Œä½ æ˜¯å¦å¾ˆå¤šé—®å·ï¼Œè¿™æ ¹æœ¬æœä¸åˆ°è¿™ä¸ª RouterConfg è¿™ä¸ªä¸œä¸œå•Š

<img src="../../images/å¹´ç³•çš„ä¸‰ä¸ªé—®å·.png" width="200" height="200"></img>

æ”¹å˜æœç´¢å…³é”®è¯`createRouter`ï¼Œçœ‹ä¼ å‚æ˜¯æ€ä¹ˆå®šä¹‰çš„

![vue-next-021.png](./images/vue-next-021.png)

æ¥ç€æœç´¢ `RouterOptions`ï¼Œä¼šå‘ç°å®ƒæ˜¯ç»§æ‰¿`PathParseOptions`

![vue-next-022.png](./images/vue-next-022.png)

å¾€ä¸‹çœ‹ï¼Œå¯ä»¥çœ‹åˆ°`routes:RouteRecordRaw[]`ï¼Œè¿™æ‰æç„¶å¤§æ‚Ÿ

`RouteConfig`ç±»å‹æ ¹æœ¬æ²¡æœ‰ä¸å­˜åœ¨ï¼Œè€Œæˆ‘ä»¬è¦ä½¿ç”¨çš„åº”æ˜¯`RouteRecordRaw`ç±»å‹

![vue-next-023.png](./images/vue-next-023.png)

æœä¸å…¶ç„¶ï¼Œå°† `RouteConfig` æ›¿æ¢æˆ `RouteRecordRaw` åä¸æŠ¥é”™äº†

åˆ°è¿™é‡Œè¿˜æ²¡æœ‰ç»“æŸï¼Œæ‰“å¼€ github [vue-route-next](https://github.com/vuejs/vue-router-next)

![vue-next-024.png](./images/vue-next-024.png)

ä¼šå‘ç°`RouteConfig`æ˜¯åœ¨`vue-router@3`é‡Œæ‰æœ‰ï¼Œè€Œåœ¨`vue-router@4`ä¸­ï¼Œå¯¹åº”çš„å…¶å®æ˜¯
`RouteRecordRaw`

![vue-next-025.png](./images/vue-next-025.png)

ç„äº†çœ¼ï¼Œæˆ‘ä½¿ç”¨çš„`vue-router`æ˜¯`4.0.0-alpha.6`ç‰ˆæœ¬

è¿˜æ˜¯æ¯”è¾ƒå¥½å¥‡ï¼Œ`vue add vue-next`å‡çº§çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆ`vue-router`å¹¶ä¸æ˜¯æœ€æ–°çš„è¯­æ³•

æ¥åˆ°`vue-cli-plugin-vue-next`çš„ issuesã€‚æœç„¶ï¼Œæœ‰äººæäº†è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥æ˜¯å®˜æ–¹è¿˜æ²¡æœ‰å°†é»˜è®¤çš„è·¯ç”±é…ç½®æ›´æ”¹è¿‡æ¥

![vue-next-030.png](./images/vue-next-030.png)

### Cannot use namespace 'Vue' as a type.

å¿ƒæœ‰ç‚¹ç´¯ï¼Œè¿™é‡Œæç¤ºä¸èƒ½ä½¿ç”¨ Vue ä½œä¸ºç±»å‹çš„å‘½åç©ºé—´

![vue-next-026.png](./images/vue-next-026.png)

```typescript
import Vue, { VNode } from 'vue';

declare global {
  namespace JSX {
    // tslint:disable no-empty-interface
    interface Element extends VNode {}
    // tslint:disable no-empty-interface
    interface ElementClass extends Vue {}
    interface IntrinsicElements {
      [elem: string]: any;
    }
  }
}
```

ä¸ºä»€ä¹ˆä¸èƒ½å‘¢ï¼Ÿè¿™ä¸æ˜¯è„šæ‰‹æ¶è‡ªåŠ¨ç”Ÿæˆçš„å—ï¼Ÿ

Google ä¸€åœˆï¼Œæç¤ºè®¾ç½®`"skipLibCheck": true`

tsconfig.json

```json
{
  "compilerOptions": {
    "skipLibCheck": true
  }
}
```

### Property 'createStore' does not exist on type...

å®Œæ•´æŠ¥é”™å¦‚ä¸‹

![vue-next-027.png](./images/vue-next-027.png)

index.ts

```typescript
import  Vuex from 'vuex';.

export default Vuex.createStore({
  state: {},
  mutations: {},
  actions: {},
  modules: {},
});
```

è¿™å›æˆ‘å­¦èªæ˜äº†ï¼Œç›´æ¥å» github æŸ¥å®˜æ–¹æ–‡æ¡£äº†[vuejs/vuex](https://github.com/vuejs/vuex/tree/4.0)

![vue-next-028.png](./images/vue-next-028.png)

ä¸åŒä¹‹å¤„å°±æ˜¯å¼•å…¥çš„æ–¹å¼äº†ï¼Œè™½ç„¶æ„Ÿè§‰æ²¡å•¥å·®åˆ«ï¼Œä½†æ˜¯æ›¿æ¢æˆå®˜æ–¹çš„å†™æ³•å°±ä¸æŠ¥é”™äº†

```typescript
import { createStore } from 'vuex';

export default createStore({
  state: {},
  mutations: {},
  actions: {},
  modules: {},
});
```

### "export 'default' (imported as 'Vue') was not found in 'vue'

å¦‚å›¾ï¼ŒæŠ¥äº†äº”ä¸ªè­¦å‘Šï¼Œéƒ½æ˜¯ä¸€æ ·çš„å†…å®¹

```
warning in ./node_modules/vue-class-component/dist/vue-class-component.esm.js
```

![vue-next-029.png](./images/vue-next-029.png)

## ğŸ”— Related Links

- [Vue + typescript æŒ–å‘è®°](https://segmentfault.com/a/1190000018372308)

- [Vue3 Router with Typescript: missing RouteConfig](https://stackoverflow.com/questions/62438045/vue3-router-with-typescript-missing-routeconfig)

**Hidden Icon**
âœ¨ğŸ›ğŸ”—ğŸ“¦ğŸ”¨ğŸ‘‰ğŸŒˆğŸ¨âœ…ğŸ“ğŸ’„ğŸŒ±ğŸ”°ğŸ†™ğŸ›¡âš™ï¸ğŸŒğŸ–¥âŒ¨ï¸ğŸ¤â¤ï¸ğŸ’šâš¡ğŸ”ŒğŸ§³ğŸ’ªğŸ¯â“ğŸ‘¬ğŸğŸ’¿ğŸ“–ğŸ§ğŸ¤”ğŸ‘½ğŸ‰ğŸ”§
